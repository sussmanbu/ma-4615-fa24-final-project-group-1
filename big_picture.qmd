---
title: "Story and Question"
description: ""
toc: true
draft: FALSE
engine: shiny 

---

Potholes, cracks, and worn-out pavement—when we think about what causes traffic accidents, poor road conditions are often the first thing that comes to mind. But is the connection as straightforward as it seems?

To find out, we dug into the data to see how road quality, weather, and surface conditions shape the likelihood of accidents. What we found might surprise you. While pavement conditions do play a role, they’re far from the whole story.

**Road Quality Isn’t Everything**

Roads are rated by the Pavement Condition Index (PCI), which measures their quality on a scale from terrible to perfect. If bad roads mean more accidents, we should see a clear relationship between PCI and accident counts.

Instead? The connection is weak. A scatter plot with a trend line shows that while better roads slightly reduce accidents, the trend is subtle.

What does this mean? Road conditions alone don’t explain much. Other factors—like weather and what’s on the road surface—may matter even more.

**When Weather and Wet Roads Take the Wheel**

Here’s where it gets interesting, wet surfaces (like roads after a storm) significantly increase accident counts.Rainy weather, on the other hand, seems to have the opposite effect—it actually reduces accidents.How does that make sense? It turns out drivers tend to slow down and be more careful when it’s raining, even though wet roads themselves are a major hazard.

A multivariate visualization brings this dynamic to life, showing how weather and surface conditions interact with PCI to impact accidents.

**It’s Not a Straight Line Complex Patterns in the Data**

When we examined the relationship between PCI and accidents further, a surprising pattern emerged. Instead of a simple straight-line relationship, we found a U-shaped trend.

This means accidents were more frequent at moderate PCI levels than at very high or very low PCI levels. Why? It’s hard to say for sure, but this might reflect how drivers behave or how other factors like traffic volume play a role.

Our polynomial regression plot captures this complexity and adds a new layer to the story, road conditions affect accidents in more complicated ways than we expected.

**Get Behind the Wheel, Explore the Data Yourself**

Want to see these patterns for yourself? We’ve built an interactive dashboard where you can dig into the data.

Toggle between weather conditions to see how rain or wet roads impact accident trends.
Compare the results of linear and nonlinear models to understand the bigger picture.
It’s an easy way to explore what’s happening on our roads and what factors matter most.

**The Big Takeaways: Better Roads Help—But Not Much**

While smoother pavement is linked to slightly fewer accidents, the effect is small. Weather and Wet Roads Matter More
Wet roads increase accidents, while rainy weather may make drivers more cautious.

Complex Relationships

The U-shaped trend between PCI and accidents shows how other factors—like driver behavior or traffic flow—play a big role.
What This Means for Safer Roads

Our findings point to a broader truth

keeping roads safe takes more than just paving over potholes. It means targeting the biggest risks, like managing wet-road hazards and encouraging safer driving during bad weather.

By understanding these dynamics, we can make smarter decisions—whether that’s where to invest in road improvements or how to educate drivers about staying safe in tough conditions.

So, the next time you drive on a cracked road or slow down in the rain, remember, every condition tells a story. And with the right insights, we can make that story a little safer for everyone.

### Interactive 

```{r}
#| eval: false
#| echo: false
#| standalone: true
#| engine: shiny 
#| viewerHeight: 650 # You will have to adjust this to fit everything

if (!require("shiny")) {
  install.packages("shiny")
  library(shiny)
}

library(shiny)
library(ggplot2)
library(dplyr)
library(tidyverse)

options("readr.edition" = 1) # keep this to ensure you can download the data

# Define UI
ui <- fluidPage(
  titlePanel("Interactive Visualization with Shiny"),
  
  sidebarLayout(
    sidebarPanel(
      selectInput(
        inputId = "column",
        label = "Select a column to visualize:",
        choices = c("Speed.Limit", "Surface.Condition", "Injury.Severity"),
        selected = "Speed.Limit"
      ),
      conditionalPanel(
        condition = "input.column == 'Speed.Limit'",
        sliderInput("bins", "Number of bins:", min = 1, max = 50, value = 30)
      )
    ),
    mainPanel(
      tabsetPanel(
        tabPanel("Plot", plotOutput("plot")),
        tabPanel(
          "Embedded Content",
          tags$iframe(
            src = "https://example.com", # Replace with the desired URL
            width = "100%",
            height = "600px",
            frameborder = "0"
          )
        )
      )
    )
  )
)

# Define server logic
server <- function(input, output) {
  data <- reactive({
    # Replace this with your dataset loading logic
    read_rds(here::here("dataset", "cleaned_dataset.rds")) %>%
      mutate(
        # Standardize Injury.Severity categories
        Injury.Severity = case_when(
          grepl("fatal", Injury.Severity, ignore.case = TRUE) ~ "Fatal Injury",
          grepl("serious", Injury.Severity, ignore.case = TRUE) ~ "Serious Injury",
          TRUE ~ Injury.Severity
        )
      )
  })
  
  output$plot <- renderPlot({
    column_data <- data()[[input$column]]
    
    if (is.numeric(column_data)) {
      # Numeric column: render a histogram
      ggplot(data(), aes_string(x = input$column)) +
        geom_histogram(bins = input$bins, fill = "red", color = "white") +
        theme_minimal() +
        labs(title = paste("Distribution of", input$column))
    } else {
      # Categorical column: render a bar chart with improved x-axis
      ggplot(data(), aes_string(x = input$column)) +
        geom_bar(fill = "red", color = "white") +
        theme_minimal() +
        theme(
          axis.text.x = element_text(angle = 45, hjust = 1) # Rotate x-axis labels
        ) +
        labs(title = paste("Counts of", input$column))
    }
  })
}

# Run the app
shinyApp(ui = ui, server = server)

```

```{r}

#| eval: false
#| echo: false
#| standalone: true
#| engine: shiny 
#| viewerHeight: 650 # You will have to adjust this to fit everything

if (!require("shiny")) {
  install.packages("shiny")
  library(shiny)
}

library(shiny)
library(ggplot2)
library(dplyr)
library(tidyverse)

 

options("readr.edition" = 1) # keep this to ensure you can download the data


# Define UI
ui <- fluidPage(
  titlePanel("Interactive Visualization with Shiny"),
  
  sidebarLayout(
    sidebarPanel(
      selectInput(
        inputId = "column",
        label = "Select a column to visualize:",
        choices = c("Speed.Limit", "Surface.Condition", "Injury.Severity"),
        selected = "Speed.Limit"
      ),
      conditionalPanel(
        condition = "input.column == 'Speed.Limit'",
        sliderInput("bins", "Number of bins:", min = 1, max = 50, value = 30)
      )
    ),
    mainPanel(
      plotOutput("plot")
    )
  )
)

# Define server logic
server <- function(input, output) {
  data <- reactive({
    # Replace this with your dataset loading logic
    read_rds(here::here("dataset", "cleaned_dataset.rds")) %>%
      mutate(
        # Standardize Injury.Severity categories
        Injury.Severity = case_when(
          grepl("fatal", Injury.Severity, ignore.case = TRUE) ~ "Fatal Injury",
          grepl("serious", Injury.Severity, ignore.case = TRUE) ~ "Serious Injury",
          TRUE ~ Injury.Severity
        )
      )
  })
  
  output$plot <- renderPlot({
    column_data <- data()[[input$column]]
    
    if (is.numeric(column_data)) {
      # Numeric column: render a histogram
      ggplot(data(), aes_string(x = input$column)) +
        geom_histogram(bins = input$bins, fill = "red", color = "white") +
        theme_minimal() +
        labs(title = paste("Distribution of", input$column))
    } else {
      # Categorical column: render a bar chart with improved x-axis
      ggplot(data(), aes_string(x = input$column)) +
        geom_bar(fill = "red", color = "white") +
        theme_minimal() +
        theme(
          axis.text.x = element_text(angle = 45, hjust = 1) # Rotate x-axis labels
        ) +
        labs(title = paste("Counts of", input$column))
    }
  })
}

# Run the app
shinyApp(ui = ui, server = server)

```